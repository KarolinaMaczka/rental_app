{% load static %}
<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/header.css' %}">
    <link rel="stylesheet" href="{% static 'css/register.css' %}">
    <script src="{% static 'js/fade_in.js' %}"></script>

    <title>Apartments</title>
</head>

 <header>
        {% include 'header.html' %}
     <script>
        function changeHeaderClass() {
            var header = document.querySelector('.header-with-gradient');
            if (header) {
                header.className = 'normal-header';
            }
        }
        changeHeaderClass();
    </script>
    </header>

<body>

    <div id="content">
        <h1>Register now and rent your dream place!</h1>

        <form class="standard-form" method="post">
            {% csrf_token %}
            <input type="text" name="username" placeholder="Username">
            <input type="text" name="first_name" placeholder="Name">
            <input type="text" name="surname" placeholder="Surname">

            <input type="email" name="email" placeholder="Email">
            <input type="password" name="password" placeholder="Password">
            <button type="submit">Register</button>

            {% if error %}
                <p class="alert">{{ error }}</p>
            {% endif %}
        </form>


    </div>


<script>
document.addEventListener('DOMContentLoaded', function() {
    document.querySelector('.standard-form').addEventListener('submit', function(event) {
        var username = document.getElementsByName('username')[0].value;
        var firstName = document.getElementsByName('first_name')[0].value;
        var surname = document.getElementsByName('surname')[0].value;
        var email = document.getElementsByName('email')[0].value;
        var password = document.getElementsByName('password')[0].value;
        var messages = [];

        if (!username.trim()) messages.push('Username is required.');
        if (!firstName.trim()) messages.push('Name is required.');
        if (!surname.trim()) messages.push('Surname is required.');

        if (!email.trim()) {
            messages.push('Email is required.');
        } else if (!/\S+@\S+\.\S+/.test(email)) {
            messages.push('Email is invalid.');
        }

        if (!password) {
            messages.push('Password is required.');
        } else {
            if (password.length < 8) messages.push('Password must be at least 8 characters long.');
            if (!/[A-Z]/.test(password)) messages.push('Password must contain at least one uppercase letter.');
            if (!/[0-9]/.test(password)) messages.push('Password must contain at least one digit.');
        }

        if (messages.length > 0) {
            event.preventDefault();
            alert('Validation errors:\n' + messages.join('\n'));
        }
    });
});
</script>


</body>
</html>